# AirSight Production-Optimized Configuration
# ============================================

# Server Configuration
server.port=8080
server.servlet.context-path=/
server.compression.enabled=true
server.compression.mime-types=text/html,text/css,application/javascript,application/json
server.compression.min-response-size=1024

# Database Configuration - Production (Use Environment Variables)
spring.datasource.url=${DATABASE_URL:jdbc:h2:file:./data/airquality;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE}
spring.datasource.username=${DATABASE_USERNAME:root}
spring.datasource.password=${DATABASE_PASSWORD:Mformysql@12}
spring.datasource.driver-class-name=${DATABASE_DRIVER:org.h2.Driver}

# For production MySQL deployment:
# DATABASE_URL=jdbc:mysql://localhost:3306/air_quality_monitoring?useSSL=true&serverTimezone=UTC
# DATABASE_DRIVER=com.mysql.cj.jdbc.Driver
# HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect

# HikariCP Connection Pool Optimization
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=${HIBERNATE_DIALECT:org.hibernate.dialect.H2Dialect}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# Hibernate Performance Optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false

# Logging Configuration
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=WARN
logging.level.com.air.airquality=INFO
logging.level.org.springframework.security=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/airsight.log
logging.file.max-size=10MB
logging.file.max-history=7

# Security Configuration
spring.security.user.name=admin
spring.security.user.password=admin123

# CORS Configuration
cors.allowed-origins=http://localhost:3000,http://127.0.0.1:5500,http://localhost:8080

# External API Configuration (Use Environment Variables in Production)
openaq.api.url=${OPENAQ_API_URL:https://api.openaq.org/v2/latest}
openaq.api.key=${OPENAQ_API_KEY:c58344c7a5506265c032b299d490d83ece8e7660567a5b6320e41d16d43fff3e}
openaq.api.timeout=${OPENAQ_TIMEOUT:10000}
openaq.api.max-retry=${OPENAQ_MAX_RETRY:3}

# Twilio SMS Configuration (Use Environment Variables in Production)
twilio.account.sid=${TWILIO_ACCOUNT_SID:AC674b1530b78f5afdfea5f8249388b3d3}
twilio.auth.token=${TWILIO_AUTH_TOKEN:ee62c7c14a9c30282699e8c44378a47a}
twilio.phone.number=${TWILIO_PHONE:+919500928399}


# Alert System Configuration
alert.batch.size=50
alert.processing.enabled=true
alert.sms.enabled=false

# Scheduled Tasks Configuration
scheduling.enabled=true
data.update.interval=300000
data.cleanup.enabled=true
# Data Retention Configuration (18 months as per requirements)
data.retention.days=${DATA_RETENTION_DAYS:548}  # 18 months
data.cleanup.enabled=${DATA_CLEANUP_ENABLED:true}
data.cleanup.schedule=${DATA_CLEANUP_SCHEDULE:0 0 2 * * *}  # Daily at 2 AM

# Application Performance Settings
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.serialization.fail-on-empty-beans=false

# Thread Pool Configuration
spring.task.scheduling.pool.size=5
spring.task.execution.pool.core-size=8
spring.task.execution.pool.max-size=25
spring.task.execution.pool.queue-capacity=100

# Caching Configuration - Production Ready
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=10000,expireAfterAccess=30m
spring.cache.cache-names=aqi-data,cities,users,analytics-cache

# Health Check Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
management.health.db.enabled=true

# Production Optimizations
spring.jmx.enabled=false
spring.main.lazy-initialization=false
spring.devtools.restart.enabled=false

# Error Handling
server.error.whitelabel.enabled=false
server.error.include-stacktrace=never
server.error.include-message=always
